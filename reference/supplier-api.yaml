openapi: 3.1.0
info:
  title: supplier-api
  version: '1.0'
  description: API de proveedores
  contact:
    name: Arcoprime
  summary: API de proveedores
servers:
  - url: 'http://localhost:3000'
paths:
  '/supplier/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: Get Supplier Info by Supplier ID
      tags:
        - supplier
      responses:
        '200':
          description: Supplier Found
          content:
            application/json:
              schema:
                type: object
                properties:
                  supplier:
                    type: array
                    items:
                      $ref: '#/components/schemas/Supplier'
                  totalPages:
                    type: integer
                  page:
                    type: integer
                  pageSize:
                    type: integer
                  totalRecords:
                    type: integer
      operationId: get-supplier-supplierID
      description: Retrieve the information of the supplier with the matching supplier ID.
      parameters:
        - schema:
            type: string
          in: query
          name: rut
          description: RUT del proveedor
        - schema:
            type: string
          in: query
          name: page
          required: true
        - schema:
            type: string
          in: query
          name: pagesize
          required: true
        - schema:
            type: string
          in: query
          name: orderAttribute
        - schema:
            type: string
          in: query
          name: order
        - schema:
            type: string
          in: header
          name: apikey
        - schema:
            type: string
          in: header
          name: username
    patch:
      summary: Actualización parcial de Proveedores
      operationId: patch-supplier-id
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Supplier'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Supplier'
  /supplier:
    post:
      summary: Create Supplier
      tags:
        - supplier
      operationId: post-supplier
      responses:
        '201':
          description: Created
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties: {}
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '504':
          description: Gateway Timeout
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Supplier'
            examples: {}
        description: Post the necessary fields for the API to create a new supplier.
      description: Create a new supplier.
      parameters:
        - schema:
            type: string
          in: header
          name: username
          description: usuario que realiza la accion
        - schema:
            type: string
          in: header
          name: apikey
          description: key de autorización
    parameters: []
components:
  schemas:
    Supplier:
      title: Supplier
      type: object
      description: Modelo del proveedor
      properties:
        id:
          type: integer
          description: Unique identifier for the given user.
        name:
          type: string
        fictionName:
          type: string
        personType:
          type: string
          enum:
            - Natural
            - Jurídica
        origin:
          type: string
          enum:
            - Nacional
            - Internacional
        sapCode:
          type: string
        status:
          type: string
          enum:
            - NEW
            - APPROVED
            - REJECTED
            - PENDING
            - REGISTERING
            - READY
            - ERROR
        rut:
          type: string
        address:
          $ref: '#/components/schemas/Address'
        legalAgent:
          $ref: '#/components/schemas/Contact'
        purchaseOrderContact:
          $ref: '#/components/schemas/Contact'
        entities:
          type: array
          items:
            $ref: '#/components/schemas/Entity'
        payment:
          $ref: '#/components/schemas/Payment'
        statusLog:
          type: array
          items:
            $ref: '#/components/schemas/StatusLog'
        accountGroup:
          type: string
          enum:
            - DIST
            - ACREE
        treasuryGroup:
          type: string
          enum:
            - GASTO
            - EXISTENCIA
        log:
          $ref: '#/components/schemas/Log'
        documents:
          type: array
          items:
            type: string
            example: '{6567-7232-8387, 6567-7232-4387, 6567-7232-8334}'
      required:
        - name
        - origin
        - rut
        - legalAgent
    Address:
      title: Address
      type: object
      properties:
        id:
          type: number
        country:
          type: string
          example: Segun estandar ISO
        region:
          type: string
        city:
          type: string
        commune:
          type: string
        street:
          type: string
        zipCode:
          type: string
    Payment:
      title: Payment
      type: object
      properties:
        currencyCod:
          type: string
          enum:
            - PEN
            - CLP
            - USD
            - ARS
            - EUR
        condition:
          type: string
          enum:
            - 30_DAYS
            - 15_DAYS
        supplierId:
          type: number
    Contact:
      title: Contact
      type: object
      properties:
        id:
          type: number
        names:
          type: string
        lastnames:
          type: string
        rut:
          type: string
        email:
          type: string
        phone:
          type: string
        language:
          type: string
          enum:
            - ESP
        businessArea:
          type: string
        jobTitle:
          type: string
    Entity:
      title: Entity
      type: object
      properties:
        id:
          type: string
        name:
          type: string
    StatusLog:
      title: StatusLog
      type: object
      properties:
        id:
          type: string
          example: fb16291c-aa06-11ec-b909-0242ac120002
          description: identifier in UUID format
        user:
          type: string
          example: frojas@arcoprime.cl
          description: Identifier of the user who did the change of status.
        timestamp:
          type: string
          format: date-time
          example: '2018-05-15T14:51:12.402+00:00'
        newStatus:
          type: string
          enum:
            - NEW
            - PENDING
            - APPROVED
            - REJECED
            - REGISTERING
            - READY
            - ERROR
          description: This is the current status configured for the supplier
        oldStatus:
          type: string
          enum:
            - NEW
            - PENDING
            - APPROVED
            - REJECED
            - REGISTERING
            - READY
            - ERROR
          description: This is the old status that has been changed for the supplier.
    EntitySupplier:
      title: EntitySupplier
      type: object
      description: Relation that describes the configuration of the suppliers in different entities
      properties:
        entityId:
          type: number
          description: Id of the entity
          example: 0
        supplierid:
          type: number
        invoiceIssuer:
          type: number
          description: This is the reference to a supplier id existing in PIM or SAP
        status:
          type: integer
          example: 0
          default: 1
    Log:
      title: Log
      type: object
      properties:
        createDate:
          type: string
          format: date-time
          example: '2018-05-15T14:51:12.402+00:00'
        updateDate:
          type: string
          format: date-time
          example: '2018-05-15T14:51:12.402+00:00'
        createUser:
          type: string
          example: frojas@arcoprime.cl
        updateUser:
          type: string
          example: frojas@arcoprime.cl
      description: Model to support logging information
    Error:
      title: Error
      type: object
      properties:
        userMessage:
          type: string
        internalMessage:
          type: string
  securitySchemes: {}
tags:
  - name: supplier
